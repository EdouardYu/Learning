{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from \"react\";\n//import { useHistory } from \"react-router-dom\";\n\nimport PokemonService from \"../services/pokemon-service\";\n\n// Ceci est un hook personnalisé\nconst usePokemons = () => {\n  _s();\n  //const history = useHistory();\n\n  // ce hook personnalisé comporte d'autres hooks (useState et useEffect ici)\n  // les crochets servent pour le destructuring d'es6\n  const [pokemons, setPokemons] = useState([]);\n  // Au lieu de :\n  // const pokemonsStateVariable = useState<Pokemon[]>([]);\n  // const pokemons = pokemonsStateVariable[0];\n  // const setPokemons = pokemonsStateVariable[1];\n  // Pour récupérer seulement les pokémons, on peut faire :\n  // const [pokemons] = useState<Pokemon[]>(POKEMONS);\n\n  const flag = useRef(false);\n  useEffect(() => {\n    if (flag.current === false) {\n      PokemonService.getPokemons().then(response => {\n        const pokemons = response.data.map(pokemon => ({\n          ...pokemon,\n          ...{\n            created: new Date(pokemon.created)\n          }\n        }));\n        setPokemons(pokemons);\n      });\n      //.catch(() => history.push(\"\"));\n    }\n    return () => {\n      flag.current = true;\n    };\n  }, []);\n  // le tableau vide en argument permet d'éviter de déclencher\n  // le hook d'effet à chaque modification du composant\n  // il se déclenche que lors du premier rendu\n  // Si on ajoute des dépendances au tableau, le hook se déclenchera aussi\n  // lors de des modifications de ses dépendances\n  // Si, on ne met rien, le hook s'active à chaque modification du composant\n  return pokemons;\n};\n_s(usePokemons, \"qwMVcHa3WA2jzshTs275SKjz40s=\");\nexport default usePokemons;","map":{"version":3,"names":["useState","useEffect","useRef","PokemonService","usePokemons","_s","pokemons","setPokemons","flag","current","getPokemons","then","response","data","map","pokemon","created","Date"],"sources":["C:/Users/yuedo/OneDrive/Bureau/JS/React/pokedex/client/src/hooks/pokemon.hook.ts"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\n//import { useHistory } from \"react-router-dom\";\r\nimport Pokemon from \"../models/pokemon\";\r\nimport PokemonService from \"../services/pokemon-service\";\r\n\r\n// Ceci est un hook personnalisé\r\nconst usePokemons = () => {\r\n  //const history = useHistory();\r\n\r\n  // ce hook personnalisé comporte d'autres hooks (useState et useEffect ici)\r\n  // les crochets servent pour le destructuring d'es6\r\n  const [pokemons, setPokemons] = useState<Pokemon[]>([]);\r\n  // Au lieu de :\r\n  // const pokemonsStateVariable = useState<Pokemon[]>([]);\r\n  // const pokemons = pokemonsStateVariable[0];\r\n  // const setPokemons = pokemonsStateVariable[1];\r\n  // Pour récupérer seulement les pokémons, on peut faire :\r\n  // const [pokemons] = useState<Pokemon[]>(POKEMONS);\r\n\r\n  const flag = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (flag.current === false) {\r\n      PokemonService.getPokemons().then((response) => {\r\n        const pokemons: Pokemon[] = response.data.map((pokemon: Pokemon) => ({\r\n          ...pokemon,\r\n          ...{ created: new Date(pokemon.created) },\r\n        }));\r\n        setPokemons(pokemons);\r\n      });\r\n      //.catch(() => history.push(\"\"));\r\n    }\r\n\r\n    return () => {\r\n      flag.current = true;\r\n    };\r\n  }, []);\r\n  // le tableau vide en argument permet d'éviter de déclencher\r\n  // le hook d'effet à chaque modification du composant\r\n  // il se déclenche que lors du premier rendu\r\n  // Si on ajoute des dépendances au tableau, le hook se déclenchera aussi\r\n  // lors de des modifications de ses dépendances\r\n  // Si, on ne met rien, le hook s'active à chaque modification du composant\r\n  return pokemons;\r\n};\r\n\r\nexport default usePokemons;\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACnD;;AAEA,OAAOC,cAAc,MAAM,6BAA6B;;AAExD;AACA,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB;;EAEA;EACA;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAY,EAAE,CAAC;EACvD;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMQ,IAAI,GAAGN,MAAM,CAAC,KAAK,CAAC;EAE1BD,SAAS,CAAC,MAAM;IACd,IAAIO,IAAI,CAACC,OAAO,KAAK,KAAK,EAAE;MAC1BN,cAAc,CAACO,WAAW,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;QAC9C,MAAMN,QAAmB,GAAGM,QAAQ,CAACC,IAAI,CAACC,GAAG,CAAEC,OAAgB,KAAM;UACnE,GAAGA,OAAO;UACV,GAAG;YAAEC,OAAO,EAAE,IAAIC,IAAI,CAACF,OAAO,CAACC,OAAO;UAAE;QAC1C,CAAC,CAAC,CAAC;QACHT,WAAW,CAACD,QAAQ,CAAC;MACvB,CAAC,CAAC;MACF;IACF;IAEA,OAAO,MAAM;MACXE,IAAI,CAACC,OAAO,GAAG,IAAI;IACrB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACN;EACA;EACA;EACA;EACA;EACA;EACA,OAAOH,QAAQ;AACjB,CAAC;AAACD,EAAA,CAtCID,WAAW;AAwCjB,eAAeA,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}