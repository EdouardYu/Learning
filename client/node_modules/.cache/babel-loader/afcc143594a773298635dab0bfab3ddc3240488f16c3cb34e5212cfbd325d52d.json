{"ast":null,"code":"import AuthenticationService from \"./authentication-service\";\nconst baseURL = \"http://localhost:3001/api\";\nexport default class PokemonService {\n  static getPokemons() {\n    return fetch(`${baseURL}/pokemons?limit=20`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    }).then(response => response.json()).catch(error => this.handleError(error));\n  }\n  static getPokemon(name) {\n    return fetch(`${baseURL}/pokemon/${name}`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    }).then(response => this.handleResponse(response)).catch(error => this.handleError(error));\n  }\n  static updatePokemon(pokemon) {\n    return fetch(`${baseURL}/pokemon/${pokemon._id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      },\n      body: JSON.stringify(pokemon)\n    }).then(response => response.json()).catch(error => this.handleError(error));\n  }\n  static deletePokemon(pokemon) {\n    return fetch(`${baseURL}/pokemon/${pokemon._id}`, {\n      method: \"DELETE\",\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    }).then(response => response.json()).catch(error => this.handleError(error));\n  }\n  static addPokemon(pokemon) {\n    return fetch(`${baseURL}/pokemons`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      },\n      body: JSON.stringify(pokemon)\n    }).then(response => response.json()).catch(error => this.handleError(error));\n  }\n  static searchPokemons(term) {\n    return fetch(`${baseURL}/pokemons?name=${term}&limit=20`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    }).then(response => response.json()).catch(error => this.handleError(error));\n  }\n  static handleResponse(response) {\n    if (response.status === 401) return Promise.resolve(AuthenticationService.logout());\n    if (response.status !== 200) return Promise.resolve(this.handleError(response));\n    return response.json();\n  }\n  static handleError(error) {\n    console.log(error);\n  }\n\n  // Permet de vérifier si l'objet est vide\n  /*\r\n  static isEmpty(data: Object): boolean {\r\n    return Object.keys(data).length === 0;\r\n  }\r\n  */\n}","map":{"version":3,"names":["AuthenticationService","baseURL","PokemonService","getPokemons","fetch","headers","Authorization","localStorage","getItem","then","response","json","catch","error","handleError","getPokemon","name","handleResponse","updatePokemon","pokemon","_id","method","body","JSON","stringify","deletePokemon","addPokemon","searchPokemons","term","status","Promise","resolve","logout","console","log"],"sources":["C:/Users/yuedo/OneDrive/Bureau/JS/React/pokedex/client/src/services/pokemon-service.ts"],"sourcesContent":["import Pokemon from \"../models/pokemon\";\r\nimport AuthenticationService from \"./authentication-service\";\r\n\r\ntype Response = {\r\n  message: string;\r\n  data: any;\r\n};\r\n\r\nconst baseURL: string = \"http://localhost:3001/api\";\r\n\r\nexport default class PokemonService {\r\n  static getPokemons(): Promise<Response> {\r\n    return fetch(`${baseURL}/pokemons?limit=20`, {\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      .catch((error) => this.handleError(error));\r\n  }\r\n\r\n  static getPokemon(name: string): Promise<Response> {\r\n    return fetch(`${baseURL}/pokemon/${name}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n      },\r\n    })\r\n      .then((response) => this.handleResponse(response))\r\n      .catch((error) => this.handleError(error));\r\n  }\r\n\r\n  static updatePokemon(pokemon: Pokemon): Promise<Response> {\r\n    return fetch(`${baseURL}/pokemon/${pokemon._id}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n      },\r\n      body: JSON.stringify(pokemon),\r\n    })\r\n      .then((response) => response.json())\r\n      .catch((error) => this.handleError(error));\r\n  }\r\n\r\n  static deletePokemon(pokemon: Pokemon): Promise<Response> {\r\n    return fetch(`${baseURL}/pokemon/${pokemon._id}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      .catch((error) => this.handleError(error));\r\n  }\r\n\r\n  static addPokemon(pokemon: Pokemon): Promise<Response> {\r\n    return fetch(`${baseURL}/pokemons`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n      },\r\n      body: JSON.stringify(pokemon),\r\n    })\r\n      .then((response) => response.json())\r\n      .catch((error) => this.handleError(error));\r\n  }\r\n\r\n  static searchPokemons(term: string): Promise<Response> {\r\n    return fetch(`${baseURL}/pokemons?name=${term}&limit=20`, {\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      .catch((error) => this.handleError(error));\r\n  }\r\n\r\n  static handleResponse(response: globalThis.Response): Promise<any> {\r\n    if (response.status === 401)\r\n      return Promise.resolve(AuthenticationService.logout());\r\n    if (response.status !== 200)\r\n      return Promise.resolve(this.handleError(response));\r\n    return response.json();\r\n  }\r\n\r\n  static handleError(error: any): void {\r\n    console.log(error);\r\n  }\r\n\r\n  // Permet de vérifier si l'objet est vide\r\n  /*\r\n  static isEmpty(data: Object): boolean {\r\n    return Object.keys(data).length === 0;\r\n  }\r\n  */\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}